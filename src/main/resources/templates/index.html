<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>index</title>
    <script src="/webjars/jquery/3.1.1/jquery.min.js"></script>
    <script src="/webjars/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/webjars/bootstrap/3.3.7/css/bootstrap.min.css" />

</head>
<body>
<ul id="myTab" class="nav nav-tabs">
    <li class="active">
        <a href="#home" data-toggle="tab">
            发起申请
        </a>
    </li>
    <li>
        <a href="#second" data-toggle="tab" id="myApplications">我的申请</a>
    </li>
    <li>
        <a href="#third" data-toggle="tab" id="todoList">待我审批</a>
    </li>

</ul>
<div id="myTabContent" class="tab-content">
    <div class="tab-pane fade in active" id="home">
        <p><a th:href="@{/toApply}">发起物品维修申请</a></p>
    </div>
    <div class="tab-pane fade" id="second">
        <div class="table-responsive">
            <table class="table" id="applyTable">

                <thead>
                <tr>
                    <th>提交时间</th>
                    <th>故障设备名称</th>
                    <th>状态</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>
    <div class="tab-pane fade" id="third">
     <div class="table-responsive">
         <table class="table" id="todoTable">

             <thead>
             <tr>
                 <th>提交时间</th>
                 <th>申请人</th>
                 <th>故障设备名称</th>
             </tr>
             </thead>
             <tbody>

             </tbody>
         </table>
     </div>
    </div>

</div>

</body>

<script>
    $(function(){

        $(".tablea").find(".box:first").show();    //为每个BOX的第一个元素显示
        $("#oranger a").on("click",function(){ //给a标签添加事件
            var index=$(this).index();  //获取当前a标签的个数
            $(this).parent().next().find(".box").hide().eq(index).show(); //返回上一层，在下面查找css名为box隐藏，然后选中的显示
            $(this).addClass("hover").siblings().removeClass("hover"); //a标签显示，同辈元素隐藏
        });

        $("#myApplications").click(function () {
            $("#applyTable tbody").empty();
            $.ajax({
                type: "GET",
                url: "/datas/myApplications/518974",
                //data: "name=garfield&age=18",
                dataType: "json",
                success: function(data){
                    var content = data.content;
                    for(var i = 0; i < content.length; i++){
                        var rowTem = '<tr>'
                            + '<td>' + content[i].createdTime + '</td>'
                            + '<td><a href="/toView/' + content[i].id + '">' + content[i].deviceName + '</a></td>'
                            + '<td>' + content[i].status + '</td>'
                            + '</tr>';
                        $("#applyTable tbody:last").append(rowTem);
                    }
                }
            });
        });

        $("#todoList").click(function () {
            $("#todoTable tbody").empty();
            $.ajax({
                type: "GET",
                url: "/datas/todoList/123",
                dataType: "json",
                success: function(data){
                    var content = data.content;
                    for(var i = 0; i < content.length; i++){
                        var rowTem = '<tr>'
                            + '<td>' + content[i].createdTime + '</td>'
                            + '<td>' + content[i].applicant + '</td>'
                            + '<td><a href="/toAudit/' + content[i].id + '">' + content[i].deviceName + '</a></td>'
                            + '</tr>';
                        $("#todoTable tbody:last").append(rowTem);
                    }
                }
            });
        });
    })
</script>
<style type="text/css">

</style>
</html>